# Question Types Reference

> 问题类型分类和回答策略参考。

## 1. 问题类型分类

### 1.1 进度类 (Progress)

**识别关键词**:
- "进度"、"状态"、"完成"、"做到哪了"
- "还有多少"、"什么时候完成"
- "项目情况"、"整体进展"

**查询范围**: 全局

**所需上下文层级**: L0 + L1

**回答要素**:
- 总体完成率
- 按状态分组的 Feature 列表
- 阻塞项分析
- 关键路径提示
- 下一步建议

**示例问题**:
- "项目进度怎样？"
- "哪些功能完成了？"
- "还有多少工作量？"

### 1.2 功能列表类 (Feature List)

**识别关键词**:
- "有哪些功能"、"功能列表"
- "都有什么"、"包含哪些"
- "全部功能"、"所有 Feature"

**查询范围**: 全局或特定 Domain

**所需上下文层级**: L0 + L1

**回答要素**:
- 按 Domain 分组的 Feature 列表
- 每个 Feature 的 summary
- 状态信息
- 功能间关系概述

**示例问题**:
- "有哪些功能？"
- "DocSystem 有哪些 Feature？"
- "CoreEngine 包含什么？"

### 1.3 功能详情类 (Feature Detail)

**识别关键词**:
- "XXX 做什么"、"XXX 是什么"
- "介绍 XXX"、"详细说说 XXX"
- "feat-xxx 的功能"

**查询范围**: 特定 Feature

**所需上下文层级**: L0 + L1 + L2

**回答要素**:
- Feature summary
- Scope (包含/不包含)
- 主要 AC
- 依赖关系
- 当前状态

**示例问题**:
- "feat-doc-indexer 做什么？"
- "介绍一下 sdf-analyze"
- "依赖图分析器是什么？"

### 1.4 架构概览类 (Architecture Overview)

**识别关键词**:
- "架构"、"技术栈"、"技术选型"
- "设计思路"、"整体设计"
- "用了什么技术"

**查询范围**: 全局架构

**所需上下文层级**: L0 + L3

**回答要素**:
- 技术栈
- 核心原则
- 目录结构
- ADR 列表概览

**示例问题**:
- "技术架构是什么？"
- "用了哪些技术？"
- "项目结构是怎样的？"

### 1.5 架构决策类 (Architecture Decision)

**识别关键词**:
- "为什么选择"、"为什么用"
- "ADR"、"架构决策"
- "设计原因"、"选型理由"

**查询范围**: 特定 ADR 或决策点

**所需上下文层级**: L0 + L3 (读取特定 ADR)

**回答要素**:
- 决策背景 (Context)
- 具体决策 (Decision)
- 影响和后果 (Consequences)
- 替代方案对比

**示例问题**:
- "为什么选择 TypeScript？"
- "ADR-001 是什么？"
- "目录结构为什么这样设计？"

### 1.6 依赖分析类 (Dependency Analysis)

**识别关键词**:
- "依赖"、"依赖关系"
- "阻塞"、"被阻塞"
- "执行顺序"、"先做什么"

**查询范围**: 全局或特定 Feature

**所需上下文层级**: L0 + L1 + L4

**回答要素**:
- 依赖图（文本形式）
- 阻塞关系
- 推荐执行顺序
- 关键路径

**示例问题**:
- "依赖关系是怎样的？"
- "哪些功能被阻塞了？"
- "应该先做什么？"

## 2. 边界案例处理

### 2.1 应答边界案例

这些看似边界，但应该由 /ask 回答：

| 问题 | 判定依据 | 处理方式 |
|------|----------|----------|
| "/status 和 /ask 有什么区别？" | SoloDevFlow 功能介绍 | 正常回答 |
| "workflow 流程是什么？" | SoloDevFlow 流程介绍 | 正常回答 |
| "feat-doc-indexer 的进度" | 混合查询(功能+进度) | 合并回答 |

### 2.2 引导边界案例

这些应该引导到其他工具：

| 问题 | 判定依据 | 引导目标 |
|------|----------|----------|
| "怎么使用 /status？" | 工具使用方法 | 文档或 claude-code-guide |
| "/analyze 命令怎么用？" | 命令使用方法 | `.claude/commands/analyze.md` |
| "如何添加新 Feature？" | 操作指南 | workflow.md |

### 2.3 拒绝边界案例

这些应该明确拒绝并引导：

| 问题 | 判定依据 | 引导方式 |
|------|----------|----------|
| "Claude Code 怎么配置？" | Claude Code 工具问题 | claude-code-guide agent |
| "Anthropic API 怎么调用？" | Claude API 问题 | claude-code-guide agent |
| "这个报错怎么解决？" | 故障排查 | 开发调试 |

## 3. 回答策略矩阵

| 问题类型 | 直接答案 | 详情 | 分析洞察 | 下一步建议 | 追问引导 |
|----------|----------|------|----------|------------|----------|
| 进度类 | 完成率 | 分组列表 | 关键路径 | 优先级建议 | 功能详情 |
| 功能列表 | Feature 数 | Domain 分组 | 功能关系 | 探索建议 | 功能详情 |
| 功能详情 | summary | Scope+AC | 依赖分析 | 相关功能 | 架构/依赖 |
| 架构概览 | 技术栈 | 原则+结构 | 设计理念 | ADR 探索 | 具体 ADR |
| 架构决策 | 决策结论 | 背景+影响 | 权衡分析 | 相关决策 | 其他 ADR |
| 依赖分析 | 阻塞状态 | 依赖图 | 关键路径 | 执行顺序 | 功能详情 |

## 4. 渐进式加载规则

### 4.1 加载层级定义

| 层级 | 内容 | 加载条件 |
|------|------|----------|
| **L0** | product_context.md | 所有查询 |
| **L1** | Feature Frontmatter (summary, status, tags) | 进度/功能类查询 |
| **L2** | Feature 完整文档 | 功能详情查询 |
| **L3** | ARCHITECTURE.md + ADRs | 架构类查询 |
| **L4** | 依赖图计算 | 依赖分析查询 |

### 4.2 加载优化原则

1. **最小加载**: 只加载回答所需的最小上下文
2. **按需深入**: 先 L0/L1，不够再加载更高层级
3. **避免全量**: 不要一次读取所有文档
4. **缓存复用**: 同一会话中复用已加载的上下文

## 5. 回答质量检查

### 5.1 完整性检查项

| 问题类型 | 必须包含 | 可选包含 |
|----------|----------|----------|
| 进度类 | 完成率、状态分组 | 阻塞分析、时间线 |
| 功能列表 | 所有 Domain、Feature 数 | 关系图 |
| 功能详情 | summary、Scope | AC、依赖 |
| 架构类 | 技术栈、原则 | ADR 详情 |
| 依赖类 | 直接依赖 | 传递依赖、关键路径 |

### 5.2 差异化检查项

确保回答包含 /status 不提供的内容：

- [ ] 包含"分析与洞察"部分
- [ ] 包含"下一步建议"部分
- [ ] 阻塞项有原因解释（而非仅列出）
- [ ] 提供追问引导
